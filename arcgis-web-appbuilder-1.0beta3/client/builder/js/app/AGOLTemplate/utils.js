//>>built
define(["dojo/_base/lang","dojo/Deferred","jimu/WidgetManager","jimu/utils","esri/request"],function(d,f,g,h,k){function l(e){var b=new f,c=d.clone(e);h.processWidgetSetting(c);k({url:c.folderUrl+"/manifest.json"}).then(function(a){"undefined"===typeof a.properties&&(a.properties={});"undefined"===typeof a.properties.inPanel&&(a.properties.inPanel=!0);"undefined"===typeof a.properties.isController&&(a.properties.isController=!1);d.mixin(c,a.properties);b.resolve({manifest:a,setting:c})},function(a){b.reject(a)});
return b}return{loadWidgetConfig:function(e){var b=new f;l(e.jsonObject).then(d.hitch(this,function(c){!1!==c.manifest.hasConfig?g.getInstance().tryLoadWidgetConfig(c.setting).then(d.hitch(this,function(a){b.resolve(a)})):b.resolve(null)}));return b}}});