//>>built
require({cache:{"url:builder/config/templates/LeftPane.html":'\x3cdiv class\x3d"left-pane"\x3e\r\n  \x3cdiv class\x3d"content" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"config-section" data-dojo-attach-point\x3d"configSection"\x3e\r\n      \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsNode"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"appPaneNode"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"mapPaneNode"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"widgetPaneNode"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"attributePaneNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"preview-section" data-dojo-attach-point\x3d"previewSection" style\x3d"display:none;"\x3e\r\n      \x3cdiv class\x3d"preview-header"\x3e\r\n        \x3cdiv class\x3d"header-item size-section"\x3e\r\n          \x3cdiv\x3e${nls.width}\x3c/div\x3e\r\n          \x3cinput type\x3d"text" value\x3d"1024" data-dojo-attach-point\x3d"customWidth" /\x3e\r\n          \x3cdiv class\x3d"Pixel"\x3e Px \x3c/div\x3e\r\n          \x3cdiv style\x3d"margin-left:20px;"\x3e${nls.height}\x3c/div\x3e\r\n          \x3cinput type\x3d"text" value\x3d"768"  data-dojo-attach-point\x3d"customHeight" /\x3e\r\n          \x3cdiv class\x3d"Pixel"\x3e Px \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"preview-body"\x3e\r\n        \x3c!--div class\x3d"operation-tip"\x3e${nls.selectDevice}\x3c/div--\x3e\r\n        \x3cdiv class\x3d"preview-items-section"\x3e\r\n          \x3ctable cellspacing\x3d"17"\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"previewTbody"\x3e\r\n              \x3c!-- \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3cdiv class\x3d"preview-item"\x3e\r\n                    \x3cdiv class\x3d"preview-item-bg"\x3e\r\n                      \x3cdiv class\x3d"preview-item-thumbnail"\x3e\x3c/div\x3e\r\n                      \x3cdiv class\x3d"preview-selected-icon"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cspan class\x3d"preview-item-title"\x3eiPhone5/5S\x3c/span\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e --\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"footer"\x3e\r\n    \x3cdiv class\x3d"footer-button first-footer-button" data-dojo-attach-point\x3d"btnHomePage"\x3e\x3c!--${nls.share}--\x3e\x3c/div\x3e\r\n    \x3cdiv class \x3d "seprate"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"footer-button second-footer-button preview-button" data-dojo-attach-point\x3d"btnPreview"\x3e${nls.previewMore}\x3c/div\x3e\r\n    \x3cdiv class\x3d"footer-button second-footer-button config-button" data-dojo-attach-point\x3d"btnConfig"\x3e${nls.back2Configure}\x3c/div\x3e\r\n    \x3cdiv class \x3d "seprate"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"footer-button third-footer-button" data-dojo-attach-point\x3d"btnSave"\x3e${nls.saved}\x3c/div\x3e\r\n    \x3cdiv class\x3d"forth-footer-button-arrow" \x3e\r\n      \x3cdiv class\x3d"foot-menu"\x3e\r\n          \x3cdiv nowrap data-dojo-attach-event\x3d"click:_onSave"\x3e${nls.save}\x3c/div\x3e\r\n          \x3cdiv nowrap data-dojo-attach-event\x3d"click:_onSaveAs"\x3e${nls.saveAs}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e      \r\n\r\n    \r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"loading-cover" data-dojo-attach-point\x3d"coverNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/topic dojo/on dojo/cookie dojo/request/xhr dojo/aspect dojo/query dojo/json dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/LeftPane.html ./MapConfig ./ThemeConfig ./WidgetConfig ./AttributeConfig ./TabContainer2 ../serviceUtils ../CreateAppNew jimu/utils jimu/dijit/ViewStack jimu/dijit/Message jimu/dijit/Popup dijit/registry".split(" "),function(m,b,d,e,f,E,F,G,g,H,n,p,q,r,s,
t,u,v,w,x,y,z,A,B,h,C,l){return m([p,q,r],{templateString:s,postMixInProperties:function(){this.nls=b.mixin({},builderNls.common);this.nls=b.mixin(this.nls,builderNls.leftPane)},postCreate:function(){this.inherited(arguments);this._initPreviewItems();this.themePane=new u({},this.appPaneNode);this.mapPane=new t({},this.mapPaneNode);this.mapPane.startup();this.widgetPane=new v({},this.widgetPaneNode);this.attributePane=new w({},this.attributePaneNode);this.tab=new x({tabs:[{title:this.nls.themes,content:this.themePane},
{title:this.nls.map,content:this.mapPane},{title:this.nls.widgets,content:this.widgetPane},{title:this.nls.attributes,content:this.attributePane}],selected:this.nls.themes},this.tabsNode);this._bindEvents();this.viewStack=new B({viewType:"dom",views:[this.configSection,this.previewSection]});d.place(this.viewStack.domNode,this.content);d.setStyle(this.viewStack.domNode,"width","100%");d.setStyle(this.viewStack.domNode,"height","100%");this._showConfigSection();this._showLoadingCover()},_bindEvents:function(){this.own(e.subscribe("leavePage",
b.hitch(this,this._onLeavePage)));this.own(f(this.btnPreview,"click",b.hitch(this,this._showPreviewSection)));this.own(f(this.btnConfig,"click",b.hitch(this,this._showConfigSection)));this.own(f(this.btnSave,"click",b.hitch(this,this._onSave)));this.own(f(this.customWidth,"blur",b.hitch(this,this._onCustomSizeChanged)));this.own(f(this.customHeight,"blur",b.hitch(this,this._onCustomSizeChanged)));this.own(e.subscribe("preloadWidgetsLoaded",b.hitch(this,this._onPreloadWidgetsLoaded)));this.own(e.subscribe("mapCreatedFailed",
b.hitch(this,this._onMapCreatedFailed)));this.own(e.subscribe("startChangeTheme",b.hitch(this,this._onStartChangeTheme)))},_onPreloadWidgetsLoaded:function(){this._hideLoadingCover()},_onMapCreatedFailed:function(){this._hideLoadingCover()},_onStartChangeTheme:function(){this._showLoadingCover()},_showLoadingCover:function(){d.setStyle(this.coverNode,"display","block")},_hideLoadingCover:function(){d.setStyle(this.coverNode,"display","none")},_showConfigSection:function(){d.setStyle(this.btnPreview,
"display","block");d.setStyle(this.btnConfig,"display","none");this.viewStack.switchView(this.configSection);e.publish("showPreviewConfig")},_showPreviewSection:function(){d.setStyle(this.btnPreview,"display","none");d.setStyle(this.btnConfig,"display","block");this.viewStack.switchView(this.previewSection);e.publish("showPreviewMore")},startup:function(){this.inherited(arguments);this.tab.startup();var a="",a=window.isXT?"stemapp/index.html?id\x3d"+appId:portalUrl+"apps/webappviewer/index.html?id\x3d"+
appId;d.create("a",{href:a,target:"_blank",innerHTML:this.nls.launch},this.btnHomePage)},destroy:function(){this.themePane.destroy();this.mapPane.destroy();this.widgetPane.destroy();this.attributePane.destroy();this.themePane=this.widgetPane=this.mapPane=this.themePane=null;this.inherited(arguments)},_onSave:function(){this._appHasChanged()&&("stemapp"===appId?new h({message:this.nls.canNotSaveMeg}):this._saveApp().then(b.hitch(this,function(a){a.success&&(this._disableSaveButton(),this._disableUnloadDlg())}),
function(){}))},_onSaveAs:function(){"stemapp"===appId?new h({message:this.nls.canNotSaveMeg}):z.popupDlg({createFromId:appId,appConfig:this.appConfig},this.nls.saveAs)},_enableSaveButton:function(){d.addClass(this.btnSave,"save-enable");d.setStyle(this.btnSave,"cursor","pointer");d.setAttr(this.btnSave,"innerHTML",this.nls.save)},_disableSaveButton:function(){d.removeClass(this.btnSave,"save-enable");d.setStyle(this.btnSave,"cursor","default");d.setAttr(this.btnSave,"innerHTML",this.nls.saved)},
_saveApp:function(){var a=new n;y.saveApp(appId,this.appConfig.getCleanConfig()).then(b.hitch(this,function(c){c.success?(this.lastAppConfig=b.clone(this.appConfig),a.resolve(c),(c=main.getViewByLabel("apps"))&&window.isXT&&c.refresh()):(new h({message:this.nls.saveFailedMeg+": "+c.message}),a.reject())}),b.hitch(this,function(c){new h({message:this.nls.saveFailedMeg});a.reject()}));return a},setAppConfig:function(a,c){this.appConfig=a;this.themePane.setAppConfig(a,c);this.mapPane.setAppConfig(a,
c);this.widgetPane.setAppConfig(a,c);this.attributePane.setAppConfig(a,c);c&&(this.lastAppConfig=b.clone(a));this._appHasChanged()?(this._enableSaveButton(),this._enableUnloadDlg()):(this._disableSaveButton(),this._disableUnloadDlg())},_hideAllContent:function(){d.setStyle(this.mapPane.domNode,"display","none");d.setStyle(this.widgetPane.domNode,"display","none");d.setStyle(this.themePane.domNode,"display","none")},_initPreviewItems:function(){d.empty(this.previewTbody);var a=[];a.push({"class":"new-iPad",
title:"The New iPad",width:768,height:1024});a.push({"class":"iPad-Pad2",title:"iPad \x26 iPad2",width:768,height:1024});a.push({"class":"iPad-mini",title:"iPad Mini",width:768,height:1024});a.push({"class":"iPhone5",title:"iPhone5/5S",width:320,height:568});a.push({"class":"iPhone4",title:"iPhone4/4S",width:320,height:480});a.push({"class":"iPhone-iPodTouch",title:"iPhone \x26 iPod Touch",width:320,height:480});a.push({"class":"meizu-mx2",title:"MEIZU MX2",width:400,height:640});a.push({"class":"htc-one",
title:"HTC One",width:360,height:640});a.push({"class":"samsung-note-ii",title:"Samsung Note II",width:360,height:640});a.push({"class":"samsung-note-iii",title:"Samsung Note III",width:360,height:640});a.push({"class":"sony-xperia-z",title:"Sony Xperia Z",width:360,height:640});var c=Math.ceil(a.length/4),b;for(b=0;b<c;b++){var k=d.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");d.place(k,this.previewTbody)}c=g("td",this.previewTbody);
for(b=0;b<a.length;b++){var k=c[b],e=this._createPreviewItem(a[b]);d.place(e,k)}},_createPreviewItem:function(a){var c=d.toDom('\x3cdiv class\x3d"preview-item"\x3e\x3cdiv class\x3d"preview-item-bg"\x3e\x3cdiv class\x3d"preview-item-thumbnail"\x3e\x3c/div\x3e\x3cdiv class\x3d"preview-selected-icon"\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"preview-item-title"\x3e\x3c/span\x3e\x3c/div\x3e');c.args=a;var D=g(".preview-item-bg",c)[0],k=g(".preview-item-thumbnail",c)[0],e=g(".preview-item-title",c)[0];
this.own(f(D,"click",b.hitch(this,this._onPreviewItemBgClick)));a["class"]&&d.addClass(k,a["class"]);e.innerHTML=a.title||"";return c},_onPreviewItemBgClick:function(a){a=a.target||a.srcElement;d.hasClass(a,"preview-item-thumbnail")&&(a=a.parentNode,g(".preview-item-bg",this.previewTbody).removeClass("selected"),d.addClass(a,"selected"),a=a.parentNode.args,this.customWidth.value=a.width,this.customHeight.value=a.height,e.publish("onDeviceSelected",a,!1))},_onCustomSizeChanged:function(){var a=function(a){var b=
!1;!isNaN(a)&&!isNaN(parseFloat(a))&&0<parseInt(a,10)&&(b=!0);return b},c=this.customWidth.value,b=this.customHeight.value;a(c)&&a(b)&&(g(".preview-item-bg",this.previewTbody).removeClass("selected"),c=parseInt(c,10),b=parseInt(b,10),e.publish("onDeviceSelected",{width:c,height:b},!0))},_appHasChanged:function(){var a=b.clone(this.appConfig.getCleanConfig()),c=b.clone(this.lastAppConfig.getCleanConfig());a.theme&&(a.theme.styles&&c.theme&&c.theme.styles)&&(a.theme.styles.splice(1,a.theme.styles.length),
c.theme.styles.splice(1,c.theme.styles.length));return!A.isEqual(a,c)},_enableUnloadDlg:function(){window.onbeforeunload=b.hitch(this,function(){return this.nls.theApp+' "'+l.byId("header").getAppName()+'" '+this.nls.unloadMessage})},_disableUnloadDlg:function(){window.onbeforeunload=null},_onLeavePage:function(a){var c=l.byId("header");if(this._appHasChanged())var d=new C({content:"\x3cdiv style\x3d'font-size: 14px'\x3e\x3cimg class\x3d'alert-image' src\x3d'builder/css/images/alert.png' style\x3d'float:left;margin-left:12px;margin-right:22px;'\x3e\x3c/img\x3e"+
this.nls.unSaveMegBegin+c.getAppName()+this.nls.unSaveMegEnd+"\x3c/div\x3e",titleLabel:this.nls.toHomeTitle,width:425,height:180,buttons:[{label:this.nls.save,onClick:b.hitch(this,function(){"stemapp"===appId?(new h({message:this.nls.canNotSaveMeg}),d.close()):this._saveApp().then(b.hitch(this,function(b){d.close();b.success&&(window.onbeforeunload=null,c.setAppName(""),a())}),b.hitch(this,function(a){}))})},{label:this.nls.doNotSave,onClick:b.hitch(this,function(){d.close();window.onbeforeunload=
null;c.setAppName("");a()})},{label:this.nls.cancel,onClick:b.hitch(this,function(){d.close()})}]});else window.onbeforeunload=null,c.setAppName(""),a()}})});