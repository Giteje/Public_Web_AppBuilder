//>>built
require({cache:{"url:builder/templates/Tags.html":'\x3cdiv class\x3d"${baseClass}" style\x3d"outline:none;"\x3e\x3c/div\x3e\r\n'}});
define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/on dojo/dom dojo/dom-construct dojo/parser dojo/store/Memory dojo/Deferred dojo/sniff dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_WidgetBase dijit/registry dijit/form/TextBox ./AutoComplete builder/portalUtils jimu/portalUrlUtils dojo/text!./templates/Tags.html dojo/domReady!".split(" "),function(d,c,f,r,s,e,t,g,h,k,l,u,m,v,n,p,w,x,q){return f([m,l],{templateString:q,baseClass:"esriAGOTags",_minWidth:"auto",_maxWidth:"auto",
postMixInProperties:function(){this.inherited(arguments);this.nls={addTags:"Add tag(s)",noTagsFound:"No existing tags match."}},postCreate:function(){this.inherited(arguments);this._isIE8=k("ie")},startup:function(){this.inherited(arguments)},loadTags:function(a){var b=new h;this._isIE8?(this._textTags||(this.tagsId="userTags-"+(new Date).getTime(),e.create("div",{id:this.tagsId},this.domNode),this._textTags=new n({placeHolder:this.nls.addTags,trim:!0,style:{minWidth:this._minWidth,maxWidth:this._maxWidth}},
this.tagsId)),b.resolve()):a?a.getTags().then(c.hitch(this,function(a){this._handleTags(a);b.resolve()}),c.hitch(this,function(a){this._handleTags({tags:[]});b.resolve()})):(this._handleTags({tags:[]}),b.resolve());return b},_handleTags:function(a){if(a){this._autoComplete&&this._autoComplete.clearTags();var b=[];a.tags&&d.forEach(a.tags,c.hitch(this,function(a){b.push(a)}));this._tagStore?(this._tagStore.query({}).forEach(c.hitch(this,function(a){this._tagStore.remove(a.tag)})),d.forEach(b,c.hitch(this,
function(a){this._tagStore.add(a)}))):this._tagStore=new g({idProperty:"tag",data:b});this._autoComplete||(a=(new Date).getTime(),this.tagsId="userTags-"+a,this.gridId="grid-"+a,this.filterId="filter-"+a,e.create("div",{id:this.tagsId,className:"grid_1"},this.domNode),this._autoComplete=new p({placeholder:this.nls.addTags,noDataMsg:this.nls.noTagsFound,idProperty:"tag",gridId:this.gridId,filterId:this.filterId,minWidth:this._minWidth,maxWidth:this._maxWidth,matchParam:"first",store:this._tagStore,
style:{width:this._minWidth}},this.tagsId))}},_getUniqueTags:function(a){return d.filter(a,c.hitch(this,function(b,c){return d.indexOf(a,b)===c}))},_setValueAttr:function(a){this._setTagsAttr(a)},_getValueAttr:function(){return this._getTagsAttr()},_setTagsAttr:function(a){a&&!(a instanceof Array)&&(a=a.split(","));this._isIE8?this._textTags&&this._textTags.set("value",this._getUniqueTags(a).join(",")):this._autoComplete&&(this._autoComplete.clearTags(),this._autoComplete.prepopulate(a?this._getUniqueTags(a):
[]))},_getTagsAttr:function(){return this._isIE8?this._textTags?this._textTags.get("value"):"":this._autoComplete&&this._autoComplete.values?this._autoComplete.values.join(","):""},_setMinWidthAttr:function(a){this._minWidth=a},_setMaxWidthAttr:function(a){this._maxWidth=a}})});