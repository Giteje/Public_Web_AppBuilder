<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="The Query widget allows you to build your own query for the application."><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>Web AppBuilder for ArcGIS | Help - 
Query widget
</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-E7D1C130-8F87-4109-8D61-E73A46083F52]--><!--Topic GUID: [GUID-4D155BCB-9394-4991-9CE3-2B738924D5D4]--><body><div id="content"><div class="header"><h1>
Query widget
</h1><div id="breadcrumb"></div></div>
<p id="GUID-4DE4E990-0A50-4983-9FF3-61569082CA8C"> The Query widget allows you to retrieve information from source data by executing a predefined query. Data sources can be one of the following:</p><ul purpose="ul" id="UL_02E191F41DB145E8A6C15293B2CB98F8"><li purpose="li" id="LI_84C90CD963274775800A95B08414D913">Feature layer in the current map </li><li purpose="li" id="LI_8ECE25D624F146E5AAF6B2DD476135E7">Feature layer as an item in the portal</li><li purpose="li" id="LI_AC4261C17DF2453CA889C1DBCDC105BE">Feature layer  from ArcGIS Server rest  service<div class="notes" id="GUID-7B2B8629-FF90-4B56-8F39-DE7D99DDAE93"><div class="tip"><img class="note_img" src="rsrc/tip.png" alt="Tip" title="Tip"><span>Tip:</span></div><div class="tipbody"><p id="GUID-6D50504D-B46B-4E7A-9DC3-AFFFFA91F7CA">A feature layer can be from a map service or a feature service.</p></div></div></li></ul> 

<p id="GUID-0EF193B8-29CC-4BF9-81FF-B604E96E7897"> The Query widget serves as a query builder during configuration,  allowing you to define the query by specifying source data, filter expression, and displaying fields in query results. Each query works with a single layer. However, you can define multiple queries for a single application, and data layers can be from multiple sources.</p><div class="section1" id="GUID-5882587B-971C-446A-9D0A-8C5541CC8D70" purpose="section1"><h2>
Configuring the Query widget
</h2><p id="GUID-95D208E5-0F56-4344-AFD8-9CB7C8583A83">The following steps indicate how to create a definition query. Repeat these steps if you need to define multiple queries.</p></div>
 <div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="GUID-28DA7D81-9EEC-40F6-BB08-B0C99B889E36"><div class="step_title">Steps:</div><ol>
<li purpose="step" id="GUID-C4B7C1A6-E449-446E-94DB-074B5BCD7091">
<span purpose="cmd" id="GUID-D2FDE6C7-822A-4FD1-BAF2-7128FB59F0F1">
Hover the mouse over the Query widget and click the small edit icon
<img purpose="img" placement="inline" alt="Edit" title="Edit" src="03w3/GUID-31D329BD-BC73-4BBE-AE1D-3A1261BF912A-web.png">
</span>
<div class="stepresult" purpose="stepresult"><p id="GUID-5BBC15C5-D5CB-4FC5-B849-53E856BC4642">The configuration window for this widget opens.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-28712196-12E0-4718-AE48-ACC945D39528-web.png" purpose="img" alt="Add new query" title="Add new query"></td></tr></table></div></div></li>
<li purpose="step" id="ESRI_STEP_79E74585DA5E4AE2BC6D6276E5A73F0E"><span purpose="cmd" id="GUID-0BF93AA2-EA79-4B8E-BC7C-5AACD6C115CF">Optionally, click <span class="uicontrol">change widget icon</span> if you want to replace the default icon for this widget.</span><div class="stepresult" purpose="stepresult"><p id="GUID-00ECBC9C-227E-417A-824E-AEC92A6216E6">A file explorer window opens allowing you to browse to a  local image file to use as the widget icon.</p></div></li><li purpose="step" id="ESRI_STEP_70BB580BE1DA46D1A2018143B7C057CC"><span purpose="cmd" id="GUID-720E6BFA-56E6-4FD3-A050-F7151EEE9A5C">Click <span class="uicontrol">Add New</span> next to Query Tasks.</span><div class="stepresult" purpose="stepresult"><p id="GUID-195793D7-B1A5-40E0-8A1C-8BD3BBA196DD">The Set Query Source window opens. By default, <span class="uicontrol">Select from Current Map</span> is checked and all feature layers in the current map are listed below. </p><p id="GUID-73CC4E7E-55C9-4D9C-A49C-6C4295C9B240"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-68ECFA80-6E1C-44E7-8332-CC3AFB5831F7-web.png" purpose="img" alt="Select from Current Map" title="Select from Current Map"></td></tr></table></div></p><p id="GUID-6F5AEB32-9D8B-4BEC-AF22-7AA54E76D80D">Alternatively, you can check <span class="uicontrol">Select from Portal</span> or <span class="uicontrol">Add Service URL</span> as shown below.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-363203F4-2C68-42D3-BD88-9A1A8011C6C3-web.png" purpose="img" alt="Select from Portal" title="Select from Portal"></td></tr></table></div><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-83372C9E-9701-4996-9AFA-5DB2007FFDCE-web.png" purpose="img" alt="Add Service URL" title="Add Service URL"></td></tr></table></div></div></li><li purpose="step" id="ESRI_STEP_4EAFD0D5E0A74E2DB4466DF150459C67"><span purpose="cmd" id="GUID-ED1CFA68-BE5D-436B-BD87-1CDB01538895">Check the radio button next to a data source. In this case, keep <span class="uicontrol">Select from Current Map</span> checked.</span></li><li purpose="step" id="ESRI_STEP_F988D60B0D754DE6A29DE8A1759F2FBA"><span purpose="cmd" id="GUID-26A585DC-24BD-4F75-B106-004F656A993C">Select one layer from the list of layers.</span></li><li purpose="step" id="ESRI_STEP_3BAAE476512442D088E236D3A7E2AA54"><span purpose="cmd" id="GUID-D5B34A70-42C7-48FA-94F4-5DF554E01ED5">Click <span class="uicontrol">OK</span> to close the Set Query Source window and return to the query configuration window.</span><div class="info" purpose="info"><p id="GUID-75469082-9034-42DC-8301-F3712DF34BCD">By default, the <span class="uicontrol">Query Definition</span> tab is active.</p></div></li><li purpose="step" id="ESRI_STEP_68C321EA0B5E42C9B312AFD92352A65B"><span purpose="cmd" id="GUID-74057DE4-BA9B-49D7-A3D0-B1AF303F5F80">Click <span class="uicontrol">Add another expression</span> to display the expression builder.</span><div class="info" purpose="info"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-5A4CFD02-B9E2-4ACA-AC74-596E298D2EE0-web.png" purpose="img" alt="QueryDefinition" title="QueryDefinition"></td></tr></table></div><p id="GUID-07F211C9-0109-4F06-9A49-EBEB010BCDFB">You also have the option to use  <span class="uicontrol">Add a set</span>, which allows you to define and apply two filters to a single query. Depending on if  <span class="uicontrol">All</span>  or <span class="uicontrol">Any</span> of the expressions in this set are true, either records meeting all the expressions or records meeting any of the expressions in the set return as the results. </p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-DA1F52E9-C1BE-4CED-83FB-0B4E4AFA5252-web.png" purpose="img" alt="Add a set" title="Add a set"></td></tr></table></div><p id="GUID-8B53A023-3BAA-4179-AF2A-AC47880F772E">In this case, the option of <span class="uicontrol">Add another expression</span> and consequent steps are described.</p><p id="GUID-73B7DE39-DDCA-45CC-B982-A0BBE6E78825">The filter expression can be a value based operation or  an operation between two fields. Checking the <span class="uicontrol">Unique</span> option lists the unique values for the selected field in the layer. By default, <span class="uicontrol">Value</span> is checked.</p></div></li><li purpose="step" id="ESRI_STEP_D70433A23ED84BCABF6E8F94DF63FA10"><span purpose="cmd" id="GUID-B6141F85-BB43-4161-9BD0-281789540CE0">Select a query field, an expression, and provide a value in the text box. Optionally, check the <span class="uicontrol">Unique</span> option to list all unique values for the selected field in the data layer. This option is handy when your selected field is a string or number.</span></li><div class="stepinfo" purpose="stepinfo"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-66B12BD0-5571-4E40-90A3-F3E584CC8105-web.png" purpose="img" alt="Select Unique option" title="Select Unique option"></td></tr></table></div><img purpose="img" placement="inline" alt="Unique value list" title="Unique value list" src="03w3/GUID-58A81F00-9C1B-4BA5-8F82-0F91838FE532-web.png"></div><li purpose="step" id="ESRI_STEP_A6E024DA1CFA40DFAE165BABDFF01323"><span purpose="cmd" id="GUID-A8F37A06-32EE-4F22-9C4E-3FEB866B1014">Optionally, check  <span class="uicontrol">Ask for values</span>. </span></li><div class="stepinfo" purpose="stepinfo">When this option is checked, your input value is the default query value and you have the choice of providing a new value to  overwrite the default value at run time. <div class="notes" id="GUID-DC737757-A96F-49A9-A114-E942E2AD08F6"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-E2203074-69FA-41D0-B1D9-30D805932F50">when this option is checked, provide both prompt texts and hint texts to save the query successfully; otherwise, an error message displays.</p></div></div> </div><li purpose="step" id="ESRI_STEP_FFB681AAEDB9428AA04CD26B137FB993"><span purpose="cmd" id="GUID-DEF59573-C9B1-4806-9329-C0444077088F">Click the <span class="uicontrol">Results Setting</span> tab to activate it.</span><div class="info" purpose="info"><p id="GUID-E06B361B-E445-411F-AB70-649B5629BEE0">This tab allows you to configure the displayed title and contents for the query results. Fields from the data layer available for display show in this tab.</p></div></li><li purpose="step" id="ESRI_STEP_445476A1B44A4B05BE2EBD70E45AFA8C"><span purpose="cmd" id="GUID-9DABF942-C536-4AA8-B20D-064FCDB9B1D2">Click <span class="uicontrol">Add field</span> next to the title box.</span><div class="stepresult" purpose="stepresult"><p id="GUID-1CF81FB6-CA06-4B01-BDF4-34BDDC35EE2F">The list of  fields in the layer display and allows you to select one at a time. Values from the selected field display in the box and are used as the query results title. Repeat this step to add additional fields. When multiple fields are added, the concatenation of field values are used as the result title.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-69A0CB99-B9A0-4291-85DD-83A1B23219CA-web.png" purpose="img" alt="Add field in results setting" title="Add field in results setting"></td></tr></table></div><p id="GUID-070ADD1E-6618-4E0F-8D53-4BD8DB2471E7"></p></div></li><li purpose="step" id="ESRI_STEP_40A72CC3730444A1894FFBFB12B59DA4"><span purpose="cmd" id="GUID-938C4E99-8F46-45E8-890C-FEEBA2A526B1">Check the fields you want to display in the results. For individual fields, the <span class="uicontrol">Special Type</span> column allows them to display as a link or an image according to your selection. You can also click the up or down arrows in the <span class="uicontrol">Actions</span> column to adjust the field order. </span></li><li purpose="step" id="ESRI_STEP_E1F1B24A66A7413AADBB6B720A5A1023"><span purpose="cmd" id="GUID-B1AEA01A-1E78-447B-BCE5-A15C128AFAA1">Click the symbol for the query results.</span><div class="stepresult" purpose="stepresult"><p id="GUID-AC6017DE-4AD0-489B-BB0A-517514E1B177">The preview window opens, allowing you to choose the color and style for the result highlighting symbol.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-F033C806-B72E-4AE8-A87C-138607A964C9-web.png" purpose="img" alt="Select symbol in results setting" title="Select symbol in results setting"></td></tr></table></div></div></li><li purpose="step" id="ESRI_STEP_2505E8182535486783FA2F81582AE337"><span purpose="cmd" id="GUID-89101BAE-917D-4780-A644-25ABF8E81BD5">Click anywhere outside of the symbol preview window to close it.</span></li><li purpose="step" id="ESRI_STEP_07B123FAF5CC4F99AE11563DF84A2073"><span purpose="cmd" id="GUID-324E6BAC-1324-46FF-A8EE-5371E29AEC91">Click <span class="uicontrol">OK</span>.</span><div class="stepresult" purpose="stepresult"><p id="GUID-A9E4BC0A-10A9-4385-9C2C-928DE09DAFE8">The query definition is saved and the query configuration window closes.</p></div></li></ol></div></div>
<div class="section1" id="ESRI_SECTION1_93B7EEDFDDDB4389B1F994E7792FF6DA" purpose="section1"><h2>Using the Query widget</h2><p id="GUID-A7B8A183-4E22-4AF8-8488-6F58997D3057">Clicking the Query widget in your application displays the list of predefined queries. Selecting a query displays the options for executing it:</p><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-BF8B84A8-6DE1-4C0E-91E0-1570DAEE717B-web.png" purpose="img" alt="List of queries" title="List of queries"></td></tr></table></div><ul purpose="ul" id="UL_4D138CDA7FFF4E5183E9B17532C8A48D"><li purpose="li" id="LI_8A1B3FB0862B47219229729AC31A174D">If <span class="uicontrol">Ask for values</span> is specified at configuration time, a text box displays prompting you for new value for the parameter. The default value shows in the box initially.</li><li purpose="li" id="LI_FD66C3D85A6C4F338963A18AE78C4B00">Use spatial filter—The spatial filter is applied on top of the query definition.<ul purpose="ul" id="UL_B791A4EAD12F487D8F4A9B54B95F8180"><li purpose="li" id="LI_73986442E6ED48D1A573F17B9FAAB55B">Use current map extent—Only features falling within the current map extent and meeting the query definition are returned. </li><li purpose="li" id="LI_4B8A135A050F48459E18B008B06CBE84">Draw a graphic on the map—Only features falling within the graphic and meeting the query definition are returned.</li></ul></li><li purpose="li" id="LI_BCDA37DD7C6E4B0085F69AFA16E5DAFB">Add result as operational layer—When this option is checked, query results remain on the map until the <span class="uicontrol">CLEAR RESULTS</span> button is clicked.</li></ul><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-74A21E81-C53C-4A3E-B8DA-B7DE9AE44665-web.png" purpose="img" alt="Query options" title="Query options"></td></tr></table></div><p id="GUID-FE28698F-E913-433B-A42B-1F962F36DBAB">You can select none or multiple options. Click <span class="uicontrol">Apply</span> to execute the query and display the results. Features resulted from the query highlight on the map with the symbol specified at configuration time.</p><p id="GUID-0E821F2F-5A19-4005-AF6C-CF8B35A4B4E7"><div class="image" purpose="image"><table><tr><td><img class="break" src="03w3/GUID-2552333B-5CEB-4B66-93C8-79EDAA4F32A4-web.png" purpose="img" alt="Query results" title="Query results"></td></tr></table></div></p><div class="notes" id="GUID-FEC00492-8BEB-401E-B2DB-F3CCBBEE8E6B"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-175C49AB-163B-4EBE-83FF-95F87A5D8EE5">As the functionality of Search widget is  covered by Query widget, Search widget is no more available.</p></div></div></div><div class="wfsummary" id="GUID-333ED4F8-5917-420D-8D4E-9CB224188B25" purpose="wfsummary">
</div>
<div class="footer"> Copyright © 1995-2014 Esri. All rights reserved. </div></div></body></html>